# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Fixed
- **Calm Mode text stability** - Text no longer regenerates when weak letters change during typing
- **Calm Mode keyboard sync** - Keyboard now correctly highlights the current letter to type
- **Word wrapping in typing displays** - Words no longer break mid-word onto separate lines in both Calm Mode and Practice lessons

### Added
- **Phase 8: Calm Mode** - Immersive fullscreen typing practice at `/practice/calm`
  - **Immediate fullscreen** - Enters fullscreen mode automatically on page load
  - **Full overlay** - Fixed 100vh x 100vw viewport that hides navbar and XP pill
  - **Top control bar** with pause/resume, keyboard toggle, fullscreen toggle, and exit buttons
  - Calming ambient background with soft gradient and floating orbs
  - Centered monitor with text display (not full width)
  - Full-width keyboard with hand guides (toggleable)
  - Stats display at bottom (characters, time, WPM/accuracy on hover)
  - No timers, no pass/fail, no score pressure - just peaceful practice
  - Endless text generation that auto-appends as you type
  - Weak letter targeting (40% chance to include words with struggling keys)
  - Gentle visual feedback: amber for errors instead of harsh red
  - Keyboard shortcuts: ESC to exit, Space to resume when paused
  - XP and history NOT saved to remove performance pressure
  - Silently tracks weak letters for adaptive learning
  - Full bilingual support (English/Hebrew)
  - Full WCAG accessibility with ARIA labels and keyboard navigation
- **XP awarded per exercise** - XP now adds up after each exercise (not just lesson completion)
  - 5-10 XP per exercise based on accuracy (80% = 5 XP, 100% = 10 XP)
  - XP pill animates immediately when each exercise is completed
  - Added `addExerciseXp` action to progress store
- **XP Pill** - Floating XP display always visible on all pages (top-right corner)
  - Shows total XP with animated count-up when XP increases
  - Purple glow effect and bounce animation on XP gain
  - "+X XP" popup that floats up and fades out
  - Positioned opposite the floating menu (top-right)
  - Hydration-safe with proper SSR handling
- **Lesson Intro Enhancements** - All lessons now show keyboard and stage-specific explanations
  - `LessonExplanation` component with 7 explanation types tailored to each stage
  - Stage 1: Home row explanation with visual keys and finger placement tips
  - Stage 2: Reach keys explanation showing which fingers reach to which keys
  - Stage 3: Alphabet completion encouragement
  - Stage 4: Word practice tips for building speed and flow
  - Stage 5: Punctuation guidance for ?, ! with keyboard shortcuts
  - Stage 6: Numbers and mastery tips with speed goals
  - Keyboard always visible in lesson intro with relevant keys highlighted
  - Practice keys highlighted when no new keys (limited to 15 for clarity)
- **Phase 7: Dashboard** - Dynamic personal stats dashboard with real progress data
  - `LevelCard` - Current stage display with progress bar and XP badge
  - `StatCard` - Reusable stat card with trend indicators (up/down/same arrows)
  - `StreakCard` - Practice streak display with animated flame icon and "at risk" warning
  - `ProgressChart` - Tabbed bar chart showing last 10 sessions (toggle between Accuracy/WPM)
  - `WeakLettersPanel` - Mini keyboard heatmap showing key mastery (green/yellow/red/gray)
  - `ContinuePractice` - Next lesson CTA with stage info and shimmer button effect
  - Trend calculation from session history (compares recent vs older sessions)
  - Achievement preview section with dynamic unlock states
  - Hydration-safe client rendering with loading skeleton
  - Full RTL support for Hebrew
  - Staggered fade-in animations for all dashboard elements
- **Phase 6: Progress Persistence** - Complete progress tracking and weak letter detection
  - Per-letter accuracy tracking in `useTypingEngine` via `letterAccuracy` stats
  - Weak letter tracking integration with `updateWeakLetter()` using exponential moving average
  - Session history tracking in `useProgressStore`
  - Data migration support with version-based upgrades (currently v2)
  - All progress auto-persisted to localStorage via Zustand persist middleware
- **Page Transitions** - Custom animated transitions between pages using Framer Motion
  - Home page: Grand rise from below with subtle scale and glow effect
  - Levels/Quest Map: Zoom in with perspective tilt like approaching a treasure map
  - Dashboard: Slide up with card-like stagger effect
  - Practice: Quick slide from side (RTL-aware for Hebrew)
  - Active Lesson: Dramatic focus zoom with blur-to-sharp (tunnel vision effect)
  - Route-based detection automatically applies correct animation per page type
  - Reusable motion components: PageContent, MotionItem, MotionCard, MotionFade, MotionScale, MotionList, MotionHero
  - CSS helper classes for staggered children animations
  - Full `prefers-reduced-motion` support for accessibility
- **Phase 4: Lesson Content & Structure** - Complete curriculum with 37 lessons across 6 stages
  - TypeScript type definitions for lessons, exercises, stages, and progress (`src/types/lesson.ts`)
  - Comprehensive exercise types: key-intro, key-practice, letter-combo, words, sentences, paragraph, timed, accuracy
  - **Stage 1: Home Row Haven** - 5 lessons introducing ASDF JKL; keys
  - **Stage 2: Letter Lagoon** - 6 lessons adding E, R, T, Y, U, I, G, H keys
  - **Stage 3: Word Mountain** - 8 lessons covering remaining alphabet and basic punctuation
  - **Stage 4: Sentence Safari** - 6 lessons with common words and phrases
  - **Stage 5: Paragraph Peak** - 6 lessons focusing on punctuation (?, !) and paragraphs
  - **Stage 6: Master's Summit** - 6 lessons with advanced fluency challenges and numbers
  - Lesson progression logic (`src/lib/lessonProgression.ts`) with unlock conditions
  - Curriculum utilities: getNextLesson, getCurrentLesson, getRecommendedLessons
  - Star rating system (1-3 stars based on accuracy)
  - XP calculation with star bonuses
  - Stage unlock logic (complete previous stage to unlock next)
  - Key mastery tracking (locked, learning, weak, mastered states)
  - Updated `useProgressStore` with curriculum progress methods
  - Store migration for existing users (version 2)
  - All lesson content bilingual (English/Hebrew instructions)
- **Soft, Modern Visual Redesign** - Clean, dreamy aesthetic matching professional mockup
  - New soft pastel color palette with blue tones (#F0F4FF background, soft accent colors)
  - Orange primary (#FF7B4A) for CTAs maintaining visual pop
  - Gradient background with subtle cloud decorations
  - Header redesigned with pill-shaped navigation container
  - Home page hero with stylized keyboard visualization
  - New headline "Level Up Your Typing Skills" with refined typography
  - Three feature cards: Track Progress, Game Modes, Certificate
  - FAQ section with collapsible accordion design
  - Dashboard with clean stat cards and SVG icons
  - Softer shadows with blue-gray tints
  - Fully rounded (pill) buttons for modern feel
  - Removed emoji decorations for cleaner professional look
- **Design System Implementation** - Full UI component library with consistent design tokens
  - Tailwind theme extension with all CSS custom properties (colors, spacing, typography, shadows)
  - UI component library in `src/components/ui/`:
    - `Button` - primary, secondary, ghost, game, danger variants with loading state
    - `Card` - default, raised, interactive variants with CardHeader/CardContent/CardFooter
    - `Badge` - status indicators with gamification variants (xp, streak)
    - `IconCircle` - colored icon containers for feature highlights
    - `Input` - accessible form input with label, error, and hint support
    - `Toggle` - switch component with RTL support
    - `LevelCard` - stage cards with locked/available/current/completed states
  - Barrel export (`src/components/ui/index.ts`) for clean imports
  - All pages refactored to use design system tokens (no hardcoded colors)
  - Layout components updated to use design tokens
  - Input, Toggle, Badge, IconCircle, LevelCard CSS classes added
  - RTL support for Toggle component
- **Phase 3: Visual Keyboard** - Interactive keyboard display with finger guidance
  - QWERTY keyboard layout data structure with finger assignments (`src/data/keyboard-layout.ts`)
  - `Key` component with 5 states (default, highlighted, pressed, correct, wrong)
  - `Keyboard` component displaying full QWERTY layout
  - `CompactKeyboard` component for smaller displays (letters only)
  - `FingerGuide` component showing stylized hands with active finger highlighted
  - `FingerIndicator` component for compact finger name display
  - `useKeyboardHighlight` hook managing keyboard state during typing
  - Finger color coding system (9 distinct colors per finger)
  - Key press animations (flash effects for correct/wrong keys)
  - Home row indicators on F and J keys
  - Keyboard integrated into TypingArea with settings-based visibility
  - Keyboard translations in both English and Hebrew
  - 34 new unit tests for keyboard layout and highlighting hook
- **Phase 2: Core Typing Engine** - Fully functional typing practice system
  - `useKeyboardInput` hook for capturing keyboard events
  - `useTypingEngine` hook orchestrating typing sessions with stats
  - `TextDisplay` component with character-level styling (correct/incorrect/current/pending)
  - `TypingArea` component combining text display, stats, and keyboard input
  - `Stats` component showing live WPM, accuracy, time, and errors
  - Typing utilities (`lib/typing-utils.ts`) for WPM, accuracy, and progress calculations
  - Updated `useTypingStore` with pause/resume and backspace support
  - Practice page with working typing interface and completion summary
  - Full keyboard shortcut support (Enter to start/resume, Escape to pause)
  - ARIA live regions for screen reader announcements
  - Bilingual translations for all practice UI (English/Hebrew)
- **Testing Infrastructure** - Vitest setup with React Testing Library
  - Vitest configuration for Next.js/React environment
  - 71 unit tests covering typing utilities, store, and keyboard input hook
  - Test commands: `npm test`, `npm run test:run`, `npm run test:coverage`
- Comprehensive design system documentation (`docs/DESIGN_SYSTEM.md`)
- Extended CSS custom properties with full design tokens:
  - Complete color system (surfaces, semantic, gamification, finger colors)
  - Spacing scale (4px base unit, 12 sizes)
  - Typography scale (8 sizes from caption to display-xl)
  - Border radius tokens (6 sizes)
  - Shadow tokens (including glow effects for gamification)
  - Animation timing and easing functions
  - Container width tokens
- Dark mode support via class toggle (`.dark`) in addition to `prefers-color-scheme`
- Pre-built CSS component classes:
  - Button variants (`.btn-primary`, `.btn-secondary`, `.btn-ghost`, `.btn-game`)
  - Card styles (`.card`, `.card-raised`)
  - Progress bars with gradient fills
  - Visual keyboard key styles with finger color coding
  - Gamification elements (XP ring, streak badge, achievement badge, rank badges)
- Animation utility classes:
  - `.animate-shake` for gentle error feedback
  - `.animate-pop` for correct keystroke celebration
  - `.animate-pulse-glow` for active elements
  - `.animate-flame` for streak fire effect
  - `.animate-shine` for achievement unlock
  - `.animate-count` for score changes
- Reduced motion support (`prefers-reduced-motion`)
- Internationalization (i18n) with next-intl supporting English and Hebrew
- RTL (right-to-left) layout support for Hebrew language
- Language switcher component in header
- Locale-based routing (/en and /he URL prefixes)
- Complete UI translations for all pages
- Typography system with language-aware fonts:
  - English: Baloo 2 (display/fun) and Nunito (body/UI)
  - Hebrew: Varela Round (display/fun) and Heebo (body/UI)
- CSS custom properties for fonts (`--font-display`, `--font-body`) with language fallbacks
- Typography utility classes (`.font-display`, `.font-body`, `.text-display-lg`, etc.)
- Comprehensive metadata configuration with Open Graph and Twitter cards
- JSON-LD structured data (Organization, WebSite, Course, FAQ, Speakable, Breadcrumb schemas)
- robots.txt with proper crawl directives
- Dynamic sitemap.xml with locale-specific URLs and alternates
- PWA manifest.json with app icons and configuration
- Favicon set using existing logo images (32px, 64px, 192px, 512px)
- Canonical URLs for all locale pages
- FAQ section on landing page with 5 common questions
- Key typing concepts section with entity definitions (Touch Typing, WPM, Accuracy, Home Row)
- "Why Learn Touch Typing?" section with question-based heading for AEO
- Speakable content markup for voice assistants
- SEO components for reusable JSON-LD schemas (`src/components/seo/JsonLd.tsx`)

## [0.1.0] - 2025-01-01

### Added
- Project foundation with Next.js 16, TypeScript, Tailwind CSS v4, and Zustand
- KeyQuest branding and home page with hero section
- Navigation header with links to Home, Levels, Practice, and Dashboard
- Placeholder pages for Practice, Levels, and Dashboard
- Zustand stores for progress tracking, user settings, and typing session state
- Dark mode support with system preference detection
- Project documentation (CLAUDE.md, implementation plan)
- Component directory structure for future development
